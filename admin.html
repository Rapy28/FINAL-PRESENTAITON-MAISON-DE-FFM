<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maison De FFM - Admin Dashboard</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Header -->
    <div class="admin-header">
        <h1>WELCOME ADMIN</h1>
        <p>Managing Beauty & Wellness Operations • Maison De FFM</p>
    </div>

    <!-- Tab Navigation ) -->
    <div class="admin-tabs">
        <button class="tab-btn active" data-tab="appointments">Appointments</button>
        <button class="tab-btn" data-tab="inventory">Inventory</button>
        <button class="tab-btn" data-tab="files">Files</button>
        <button class="tab-btn" data-tab="safety">Safety Reports</button>
        <button class="tab-btn" data-tab="beauticians">Beauticians</button>
        <button class="tab-btn" data-tab="beautician-profile">Beautician Profile</button>
        <button class="tab-btn" data-tab="tracker">Tracker</button>
    </div>

    <!-- Main Content -->
    <div class="admin-grid">

        <!-- Appointments Tab -->
        <div id="tab-appointments" class="tab-content active">
            <div class="admin-card full-width">
                <h3>Scheduled Appointments</h3>
                <div class="table-container">
                    <table class="appointments-table">
                        <thead>
                            <tr>
                                <th>Date & Time</th>
                                <th>Client</th>
                                <th>Service</th>
                                <th>Beautician</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Receipt</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Dec 16, 2025 • 2:00 PM</td>
                                <td>Maria Santos</td>
                                <td>Threading + Waxing</td>
                                <td>Reece</td>
                                <td>Home Service</td>
                                <td>
                                    <select class="status-select" onchange="updateStatus(this, 'Dec 16, 2025 • 2:00 PM')">
                                        <option value="Pending" selected>Pending</option>
                                        <option value="Confirmed">Confirmed</option>
                                        <option value="Ongoing">Ongoing</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Cancelled">Cancelled</option>
                                    </select>
                                </td>
                                <td>#FFM-20251216-001<br>₱1,800 via GCash</td>
                            </tr>
                            <tr>
                                <td>Dec 16, 2025 • 4:30 PM</td>
                                <td>Claire Lim</td>
                                <td>Full Facial</td>
                                <td>Jasmine</td>
                                <td>On-Site</td>
                                <td>
                                    <select class="status-select" onchange="updateStatus(this, 'Dec 16, 2025 • 4:30 PM')">
                                        <option value="Ongoing" selected>Ongoing</option>
                                        <option value="Pending">Pending</option>
                                        <option value="Confirmed">Confirmed</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Cancelled">Cancelled</option>
                                    </select>
                                </td>
                                <td>#FFM-20251216-002<br>₱2,500 via Card</td>
                            </tr>
                            <tr class="today-row">
                                <td>Dec 17, 2025 • 10:00 AM</td>
                                <td>Anna Reyes</td>
                                <td>Manicure + Pedicure</td>
                                <td>Reece</td>
                                <td>Home Service</td>
                                <td>
                                    <select class="status-select" onchange="updateStatus(this, 'Dec 17, 2025 • 10:00 AM')">
                                        <option value="Confirmed" selected>Confirmed</option>
                                        <option value="Pending">Pending</option>
                                        <option value="Ongoing">Ongoing</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Cancelled">Cancelled</option>
                                    </select>
                                </td>
                                <td>#FFM-20251217-001<br>₱3,200 via E-wallet</td>
                            </tr>
                            <tr class="today-row">
                                <td>Dec 17, 2025 • 1:00 PM</td>
                                <td>Sophia Go</td>
                                <td>Swedish Massage</td>
                                <td>Mika</td>
                                <td>Home Service</td>
                                <td>
                                    <select class="status-select" onchange="updateStatus(this, 'Dec 17, 2025 • 1:00 PM')">
                                        <option value="Pending" selected>Pending</option>
                                        <option value="Confirmed">Confirmed</option>
                                        <option value="Ongoing">Ongoing</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Cancelled">Cancelled</option>
                                    </select>
                                </td>
                                <td>N/A (Unpaid)</td>
                            </tr>
                            <tr>
                                <td>Dec 18, 2025 • 3:00 PM</td>
                                <td>Liza Tan</td>
                                <td>Hair Treatment</td>
                                <td>Lara</td>
                                <td>On-Site</td>
                                <td>
                                    <select class="status-select" onchange="updateStatus(this, 'Dec 18, 2025 • 3:00 PM')">
                                        <option value="Pending" selected>Pending</option>
                                        <option value="Confirmed">Confirmed</option>
                                        <option value="Ongoing">Ongoing</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Cancelled">Cancelled</option>
                                    </select>
                                </td>
                                <td>#FFM-20251218-001<br>₱4,000 via Cash</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="tab-inventory" class="tab-content">
            <div class="admin-card full-width">
                <h3>Inventory Management</h3>
                <div class="table-container">
                    <table class="appointments-table" id="inventory-table">
                        <thead>
                            <tr>
                                <th>Item Name</th>
                                <th>Quantity</th>
                                <th>Reorder Level</th>
                                <th>Cost (₱)</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <h4 style="margin-top: 30px; color: #ffdc5a;">Add New Item</h4>
                <form id="add-inventory-form" class="add-form">
                    <input type="text" id="itemName" placeholder="Item Name" required>
                    <input type="number" id="quantity" placeholder="Quantity" required>
                    <input type="number" id="reorderLevel" placeholder="Reorder Level" required>
                    <input type="number" id="cost" placeholder="Cost (₱)" required>
                    <button type="submit">Add Item</button>
                </form>
            </div>
        </div>

        <!-- Files Tab -->
        <div id="tab-files" class="tab-content">
            <div class="admin-card full-width">
                <h3>Files Management</h3>
                <div class="table-container">
                    <table class="appointments-table" id="files-table">
                        <thead>
                            <tr>
                                <th>Filename</th>
                                <th>Uploaded By</th>
                                <th>Type</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <h4 style="margin-top: 30px; color: #ffdc5a;">Add File Record</h4>
                <form id="add-file-form" class="add-form">
                    <input type="text" id="fileName" placeholder="Filename (e.g. cert.pdf)" required>
                    <input type="text" id="uploadedBy" placeholder="Uploaded By" required>
                    <input type="text" id="fileType" placeholder="Type (e.g. Certification)" required>
                    <button type="submit">Add Record</button>
                </form>
            </div>
        </div>

        <!-- Safety Reports Tab -->
        <div id="tab-safety" class="tab-content">
            <div class="admin-card full-width">
                <h3>Safety & Accident Reports</h3>
                <div class="table-container">
                    <table class="appointments-table" id="safety-table">
                        <thead>
                            <tr>
                                <th>Submitted By</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <h4 style="margin-top: 30px; color: #ffdc5a;">Submit New Report</h4>
                <form id="add-safety-form" class="add-form">
                    <input type="text" id="reportBy" placeholder="Your Name/ID" required>
                    <select id="reportType">
                        <option value="Safety">Safety Issue</option>
                        <option value="Accident">Accident</option>
                    </select>
                    <textarea id="reportDesc" placeholder="Describe the incident..." required style="min-height: 100px; padding: 10px;"></textarea>
                    <button type="submit">Submit Report</button>
                </form>
            </div>
        </div>

        <!-- Beauticians Tab -->
        <div id="tab-beauticians" class="tab-content">
            <div class="admin-card full-width">
                <h3>Beautician Status</h3>
                <div class="beautician-list">
                    <div class="beautician-item">
                        <strong>Anna</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Jessa</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Clara</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Sophia</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Rica</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Ella</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Leo</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Marco</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Reece</strong>
                        <span class="status available">Available</span>
                    </div>
                    <div class="beautician-item">
                        <strong>Jasmine</strong>
                        <span class="status available">Available</span>
                    </div>
                </div>
            </div>

            <div class="admin-card full-width" style="margin-top: 40px;">
                <h3>Manage Beautician Ratings</h3>
                <div class="beautician-list">
                    <div class="beautician-item rating-item">
                        <strong>Reece</strong>
                        <p>Current: <span id="rating-reece">★★★★☆ (4.0)</span></p>
                        <select class="status-select" onchange="updateRating('reece', this.value)">
                            <option value="5">★★★★★ (5.0)</option>
                            <option value="4.5">★★★★½ (4.5)</option>
                            <option value="4" selected>★★★★☆ (4.0)</option>
                            <option value="3.5">★★★½ (3.5)</option>
                            <option value="3">★★★☆☆ (3.0)</option>
                        </select>
                    </div>
                    <div class="beautician-item rating-item">
                        <strong>Jasmine</strong>
                        <p>Current: <span id="rating-jasmine">★★★★★ (4.9)</span></p>
                        <select class="status-select" onchange="updateRating('jasmine', this.value)">
                            <option value="5" selected>★★★★★ (5.0)</option>
                            <option value="4.5">★★★★½ (4.5)</option>
                            <option value="4">★★★★☆ (4.0)</option>
                            <option value="3.5">★★★½ (3.5)</option>
                            <option value="3">★★★☆☆ (3.0)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Beautician Profile Tab -->
        <div id="tab-beautician-profile" class="tab-content">
            <div class="admin-card full-width">
                <h3>Beautician Profile</h3>
                <div class="profile-center">
                    <img src="assets/profile-img.png" alt="Profile" class="profile-img">
                    <h2 id="admin-beautician-name">Beautician Name</h2>
                    <p id="admin-beautician-email">email@example.com</p>
                    <p id="admin-beautician-contact">Contact: 09XXXXXXXXX</p>
                    <div class="profile-section">
                        <h4>Skills</h4>
                        <ul id="admin-beautician-skills"></ul>
                    </div>
                    <div class="profile-section">
                        <h4>Schedule</h4>
                        <div id="admin-beautician-schedule"></div>
                    </div>
                    <button class="view-profile-btn" onclick="window.location.href='beauticianspage.html'">View/Edit Full Profile</button>
                </div>
            </div>
        </div>

        <!-- Tracker Tab -->
        <div id="tab-tracker" class="tab-content">
            <div class="admin-card">
                <h3>Live Beautician Tracker</h3>
                <div class="tracker-map">
                    <p style="text-align: center; padding: 60px 20px; color: #ccc; font-size: 18px;">
                        [Live Map View Here]<br>
                        <small>Reece → Heading to Maria Santos (ETA: 15 mins)</small>
                    </p>
                </div>
                <div class="tracker-status">
                    <p><strong>Reece:</strong> En route to client (GPS Active)</p>
                    <p><strong>Jasmine:</strong> Stationed at Salon Branch</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Logout Button -->
    <div style="text-align: center; margin: 60px 0;">
        <button class="logout-btn" onclick="logout()">LOG OUT</button>
    </div>

    <!-- Main Script -->
    <script>
        // Tab Switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                const tab = document.getElementById('tab-' + btn.dataset.tab);
                if (tab) tab.classList.add('active');

                // Load data when tab opens
                if (btn.dataset.tab === 'inventory') loadInventory();
                if (btn.dataset.tab === 'files') loadFiles();
                if (btn.dataset.tab === 'safety') loadSafety();
            });
        });

        // === INVENTORY ===
        function loadInventory() {
            const items = JSON.parse(localStorage.getItem('adminInventory') || '[]');
            const tbody = document.querySelector('#inventory-table tbody');
            tbody.innerHTML = '';
            items.forEach((item, i) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${item.reorder}</td>
                    <td>₱${item.cost}</td>
                    <td><button onclick="deleteInventory(${i})" style="background:#e74c3c; color:white; border:none; padding:6px 12px; border-radius:8px; cursor:pointer;">Delete</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        document.getElementById('add-inventory-form').addEventListener('submit', e => {
            e.preventDefault();
            const name = document.getElementById('itemName').value.trim();
            const quantity = document.getElementById('quantity').value;
            const reorder = document.getElementById('reorderLevel').value;
            const cost = document.getElementById('cost').value;
            if (!name || !quantity || !reorder || !cost) {
                alert('Please fill all fields');
                return;
            }

            const items = JSON.parse(localStorage.getItem('adminInventory') || '[]');
            items.push({ name, quantity, reorder, cost });
            localStorage.setItem('adminInventory', JSON.stringify(items));

            document.getElementById('add-inventory-form').reset();
            loadInventory();
            alert('Item added successfully!');
        });

        function deleteInventory(i) {
            if (confirm('Delete this item?')) {
                const items = JSON.parse(localStorage.getItem('adminInventory') || '[]');
                items.splice(i, 1);
                localStorage.setItem('adminInventory', JSON.stringify(items));
                loadInventory();
            }
        }

        // === FILES ===
        function loadFiles() {
            const files = JSON.parse(localStorage.getItem('adminFiles') || '[]');
            const tbody = document.querySelector('#files-table tbody');
            tbody.innerHTML = '';
            files.forEach(file => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${file.name}</td>
                    <td>${file.by}</td>
                    <td>${file.type}</td>
                    <td>${file.date}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        document.getElementById('add-file-form').addEventListener('submit', e => {
            e.preventDefault();
            const name = document.getElementById('fileName').value.trim();
            const by = document.getElementById('uploadedBy').value.trim();
            const type = document.getElementById('fileType').value.trim();
            if (!name || !by || !type) {
                alert('Please fill all fields');
                return;
            }

            const files = JSON.parse(localStorage.getItem('adminFiles') || '[]');
            files.push({ name, by, type, date: new Date().toLocaleDateString() });
            localStorage.setItem('adminFiles', JSON.stringify(files));

            document.getElementById('add-file-form').reset();
            loadFiles();
            alert('File record added!');
        });

        // === SAFETY REPORTS ===
        function loadSafety() {
            const reports = JSON.parse(localStorage.getItem('adminSafety') || '[]');
            const tbody = document.querySelector('#safety-table tbody');
            tbody.innerHTML = '';
            reports.forEach(r => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${r.by}</td>
                    <td>${r.type}</td>
                    <td>${r.desc}</td>
                    <td>${r.date}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        document.getElementById('add-safety-form').addEventListener('submit', e => {
            e.preventDefault();
            const by = document.getElementById('reportBy').value.trim();
            const type = document.getElementById('reportType').value;
            const desc = document.getElementById('reportDesc').value.trim();
            if (!by || !desc) {
                alert('Please fill required fields');
                return;
            }

            const reports = JSON.parse(localStorage.getItem('adminSafety') || '[]');
            reports.push({ by, type, desc, date: new Date().toLocaleDateString() });
            localStorage.setItem('adminSafety', JSON.stringify(reports));

            document.getElementById('add-safety-form').reset();
            loadSafety();
            alert('Report submitted successfully!');
        });

        // Existing Functions
        function logout() {
            localStorage.clear();
            window.location.href = "login.html";
        }

        function updateStatus(select, key) {
            const status = select.value;
            const appointments = JSON.parse(localStorage.getItem('adminAppointments') || '{}');
            appointments[key] = status;
            localStorage.setItem('adminAppointments', JSON.stringify(appointments));
            alert(`Status updated to ${status}`);
        }

        function updateRating(id, value) {
            let display = '';
            switch(value) {
                case '5': display = '★★★★★ (5.0)'; break;
                case '4.5': display = '★★★★½ (4.5)'; break;
                case '4': display = '★★★★☆ (4.0)'; break;
                case '3.5': display = '★★★½ (3.5)'; break;
                case '3': display = '★★★☆☆ (3.0)'; break;
            }
            document.getElementById(`rating-${id}`).textContent = display;
            const ratings = JSON.parse(localStorage.getItem('beauticianRatings') || '{}');
            ratings[id] = display;
            localStorage.setItem('beauticianRatings', JSON.stringify(ratings));
            alert(`Rating updated: ${display}`);
        }

        // Load Beautician Profile
        document.addEventListener('DOMContentLoaded', () => {
            const profile = JSON.parse(localStorage.getItem('beauticianProfile')) || {
                name: 'Anna Marie',
                email: 'anna.marie@ffm.com',
                contact: '09123456789',
                skills: ['Facial', 'Hair Styling', 'Nail Art', 'Waxing'],
                schedule: 'Mon-Fri: 9am-6pm | Sat: 10am-4pm',
            };

            document.getElementById('admin-beautician-name').textContent = profile.name;
            document.getElementById('admin-beautician-email').textContent = profile.email;
            document.getElementById('admin-beautician-contact').textContent = 'Contact: ' + profile.contact;

            const skillsList = document.getElementById('admin-beautician-skills');
            skillsList.innerHTML = '';
            profile.skills.forEach(skill => {
                const li = document.createElement('li');
                li.textContent = skill;
                skillsList.appendChild(li);
            });

            document.getElementById('admin-beautician-schedule').textContent = profile.schedule;
        });

        // Admin Access Check
        if (localStorage.getItem("userRole") !== "admin") {
            window.location.href = "login.html";
        }
    </script>

</body>
</html>